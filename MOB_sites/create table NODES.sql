use rcbill_maps;

drop table if exists IV_NODES;

CREATE TABLE `IV_NODES` (
`NODEID` int not null auto_increment,
`NODENO`  varchar(255) DEFAULT NULL,
`NODEISLAND` varchar(255) DEFAULT NULL ,
`NODENAME` varchar(255) DEFAULT NULL ,
`NODETYPE` varchar(255) DEFAULT NULL ,
`NODEDISTRICT` varchar(255) DEFAULT NULL ,
`NODEOWNER` varchar(255) DEFAULT NULL ,
`NODEPARCEL` varchar(255) DEFAULT NULL ,
`NODELAT` varchar(255) DEFAULT NULL ,
`NODELONG` varchar(255) DEFAULT NULL ,
`NODECOORDX` varchar(255) DEFAULT NULL ,
`NODECOORDY` varchar(255) DEFAULT NULL ,
`NODEICON` varchar(255) DEFAULT NULL ,
`NODEICONSIZE` varchar(255) DEFAULT NULL ,
`NODEICONOFFSET` varchar(255) DEFAULT NULL ,
`NODESTATUS` varchar(255) DEFAULT NULL ,
`COMMENT` longtext DEFAULT NULL ,
`INSERTEDON` datetime DEFAULT NULL, 
`MODIFIEDON` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
primary key (`NODEID`) 
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- drop index IDXMS1 on IV_NODES;


CREATE INDEX IDXMS1
ON IV_NODES (NODENAME);


-- set sql_safe_updates=0;
-- select * from rcbill_maps.IV_NODES;
-- delete from rcbill_maps.IV_NODES where nodeno like 'NODE-HFC%';

-- update rcbill_maps.IV_NODES set nodeiconsize='30,30';
-- update rcbill_maps.IV_NODES set nodeiconsize='20,20';

/*
insert into rcbill_maps.IV_NODES
(NODENO,NODENAME,NODETYPE,NODELAT,NODELONG,NODEDISTRICT,NODEOWNER,NODEISLAND,NODEICON,NODEICONSIZE,NODEICONOFFSET,NODESTATUS) 
values 
('NODE-HFC01','500-C3-ANSE-BOILEAU','HFC','-4.705343611','55.47841','ANSE BOILEAU','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC02','501-C4-LA-MISIERE-LEFT-I','HFC','-4.666718333','55.47271583','GRAND ANSE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC03','501-C5-LA-MISIERE-RIGHT','HFC','-4.666718333','55.47271583','GRAND ANSE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC04','501-C7-LA-MISIERE-LEFT-II','HFC','-4.666718333','55.47271583','GRAND ANSE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC05','502-C8-LA-LOUISE','HFC','-4.642519167','55.46486556','LES MAMELLES','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC06','504-C6-PETIT-PARIS','HFC','-4.661239444','55.49105722','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC07','611-C1-ROJN I','HFC','-4.635925','55.46141944','MT. FLEURI','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC08','611-C5-ROJN II','HFC','-4.635925','55.46141944','MT. FLEURI','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC09','612-C2-ANSE-ETOILE','HFC','-4.592331944','55.45703639','ANSE ETOILE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC10','613-C3-ANSE-GAULETTE I','HFC','-4.761451389','55.48676444','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC11','613-C3-ANSE-GAULETTE III','HFC','-4.761451389','55.48676444','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC12','613-C7-ANSE-GAULETTE II','HFC','-4.761451389','55.48676444','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC13','614-BEOLIERE-NODE-1','HFC','-4.672837778','55.43774472','GRAND ANSE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC14','614-BEOLIERE-NODE-2','HFC','-4.672837778','55.43774472','GRAND ANSE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC15','ANCHOR-CAFE-23','HFC','-4.739101944','55.49074472','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC16','ANCHOR-CAFE-I','HFC','-4.739101944','55.49074472','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC17','ANCHOR-CAFE-II','HFC','-4.739101944','55.49074472','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC18','ANSE-BOILEAU-2','HFC','-4.705343611','55.47841','ANSE BOILEAU','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC19','ANSE-ETOILE-U2','HFC','-4.592333333','55.45714167','ANSE ETOILE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC20','ANSE-ROYALE-27','HFC','-4.742730556','55.51654167','ANSE ROYALE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC21','BEAU-VALLON-LEFT-1-57','HFC','-4.617644444','55.42992111','BEAU VALLON','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC22','BEAU-VALLON-RIGHT-2-57','HFC','-4.617644444','55.42992111','BEAU VALLON','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC23','BEL-AIR-27','HFC','-4.6277','55.44937778','BEL AIR','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC24','BEL-AIR-27','HFC','-4.627593889','55.4494','BEL AIR','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC25','BEL-AIR-38','HFC','-4.6277','55.44937778','BEL AIR','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC26','BEL-OMBRE-NEW-23','HFC','-4.617013889','55.41454444','BEL OMBRE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC27','BEL-OMBRE-NEW-27','HFC','-4.617013889','55.41454444','BEL OMBRE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC28','BELONIE-27','HFC','-4.619080556','55.44666389','MONT BUXTON','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC29','C10-ANCHOR CAFE','HFC','-4.739101944','55.49074472','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC30','C5-UNION-VALE','HFC','-4.615083333','55.45721722','ENGLISH RIVER','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC31','FOUR-SEASONS','HFC','-4.746325','55.47151806','BAIE LAZARE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC32','GLACIS-1','HFC','-4.572161111','55.43365556','GLACIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC33','GLACIS-2-57','HFC','-4.572430833','55.4337175','GLACIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC34','GLACIS-2-57','HFC','-4.572161111','55.43365556','GLACIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC35','HEAD-OFFICE | HO-23','HFC','-4.649177222','55.4786825','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC36','HEAD-OFFICE | HO-27','HFC','-4.649177222','55.4786825','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC37','LA-LOUISE-2','HFC','-4.642519167','55.46486556','LES MAMELLES','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC38','LA-RETRAITE-23','HFC','-4.584761111','55.46176944','ANSE ETOILE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC39','LA-RETRAITE-27','HFC','-4.584761111','55.46176944','ANSE ETOILE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC40','LES-MAMELLES-23','HFC','-4.644661111','55.46996944','LES MAMELLES','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC41','LES-MAMELLES-27','HFC','-4.644661111','55.46996944','LES MAMELLES','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC42','MA-JOIE-NODE-23','HFC','-4.606283333','55.45891667','ENGLISH RIVER','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC43','MA-JOIE-NODE-27','HFC','-4.606622222','55.45868889','ENGLISH RIVER','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC44','MT-BUXTON-23','HFC','-4.614577778','55.45056944','MONT BUXTON','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC45','MT-BUXTON-27','HFC','-4.614577778','55.45056944','MONT BUXTON','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC46','PAS-23','HFC','-4.718294444','55.52395944','AU CAP','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC47','PAS-27','HFC','-4.718294444','55.52395944','AU CAP','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC48','PETIT-PARIS-23','HFC','-4.661239444','55.49105722','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC49','POINTE-LARUE-AIRPORT-23','HFC','-4.671833333','55.51168611','POINTE LARUE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC50','POINTE-LARUE-AIRPORT-27','HFC','-4.671833333','55.51168611','POINTE LARUE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC51','POLICE-ACADEMY-1-27 - POINTE LARUE','HFC','-4.681502778','55.52628972','POINTE LARUE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC52','POLICE-ACADEMY-2-27 - TURTLE BAY','HFC','-4.7070875','55.52088778','AU CAP','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC53','PPROVIDENCE-23','HFC','-4.655478889','55.488175','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC54','PPROVIDENCE-27','HFC','-4.655478889','55.488175','CASCADE','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC55','REEF-ESTATE-23','HFC','-4.694963889','55.51939722','ANSE AUX PINS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC56','REEF-ESTATE-27','HFC','-4.694963889','55.51939722','ANSE AUX PINS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC57','ROSHE-CAIMAN-23','HFC','-4.640797222','55.47101667','ROCHE CAIMAN','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC58','ROSHE-CAIMAN-27','HFC','-4.640797222','55.47101667','ROCHE CAIMAN','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC59','SANS-SOUCIS-I','HFC','-4.639244444','55.45410833','SANS-SOUCIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC60','SANS-SOUCIS-II','HFC','-4.639244444','55.45410833','SANS-SOUCIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC61','SERRET-ROAD-LEFT/ST.LOUIS/TOWN','HFC','-4.623076944','55.44283306','SAINT LOUIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC62','SERRET-ROAD-LEFT/ST.LOUIS/TOWN-2','HFC','-4.623076944','55.44283306','SAINT LOUIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC63','SERRET-ROAD-RIGHT/CURIO/PASCAL','HFC','-4.623076944','55.44283306','SAINT LOUIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC64','SERRET-ROAD-RIGHT/CURIO/PASCAL-2','HFC','-4.623076944','55.44283306','SAINT LOUIS','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC65','TAKAMAKA I','HFC','-4.777411111','55.50744722','TAKAMAKA','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC66','TAKAMAKA II','HFC','-4.777411111','55.50744722','TAKAMAKA','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC67','TEA-FACTORY-23','HFC','-4.662353611','55.43801389','PORT GLAUD','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC68','TEA-FACTORY-27','HFC','-4.662353611','55.43801389','PORT GLAUD','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC69','VICTORIA-23','HFC','-4.622782222','55.45534583','VICTORIA','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL'),
('NODE-HFC70','VICTORIA-27','HFC','-4.622782222','55.45534583','VICTORIA','INTELVISION','MAHE','icon/node_h.png','20,20','-20,-20','OPERATIONAL')

;
*/



/*

select @@version as version;


ALTER TABLE rcbill_maps.IV_NODES RENAME COLUMN NODEHEIGHT TO NODEDISTRICT;
ALTER TABLE rcbill_maps.IV_NODES CHANGE NODEHEIGHT NODEDISTRICT VARCHAR(255);

SET SESSION sql_mode = 'ALLOW_INVALID_DATES';
SET safe_update

SET SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

ALTER TABLE  rcbill_maps.IV_NODES
DROP COLUMN INSERTEDON;

alter table rcbill_maps.IV_NODES
add column `INSERTEDON` datetime DEFAULT CURRENT_TIMESTAMP
;

alter table rcbill_maps.IV_NODES
add column `MODIFIEDON` datetime ON UPDATE NOW() after INSERTEDON
;

select * from rcbill_maps.IV_NODES;

CREATE TABLE rcbill_maps.IV_NODES_BKP LIKE rcbill_maps.IV_NODES;
INSERT INTO rcbill_maps.IV_NODES_BKP SELECT * FROM rcbill_maps.IV_NODES;


CREATE TABLE rcbill_maps.IV_NODES LIKE rcbill_maps.IV_NODES_BKP;
INSERT INTO rcbill_maps.IV_NODES SELECT * FROM rcbill_maps.IV_NODES_BKP;


INSERT INTO  rcbill_maps.IV_NODES(NODEID, NODENO, NODEISLAND, NODENAME, NODETYPE, NODEHEIGHT, NODEOWNER, NODEPARCEL, NODELAT, NODELONG, NODECOORDX, NODECOORDY, NODEICON, NODEICONSIZE, NODEICONOFFSET, NODESTATUS, COMMENT)
 SELECT * FROM rcbill_maps.IV_NODES_BKP;

select * from rcbill_maps.IV_NODES_BKP;

set sql_safe_updates=0;
update rcbill_maps.IV_NODES set NODEICONSIZE='40,40';

update rcbill_maps.IV_NODES set insertedon='2021-06-22';

update rcbill_maps.IV_NODES set modifiedon='2021-06-22';


-- select 	"lat",	"lon",	"title",	"description",	"icon",	"iconSize",	"iconOffset"
select NODElat as lat, NODElong as lon, NODEname as title, 
concat_ws("<BR>",NODENO,NODENAME,NODETYPE,NODEISLAND,NODEOWNER,NODEPARCEL,NODELAT,NODELONG, NODECOORDX,NODECOORDY,NODESTATUS,COMMENT) as description
from rcbill_maps.IV_NODES
;





1	312	MAHE	LA MISERE	GBT	GOS	B4484	-4.670381	55.473643			icon/green_tower.png	30,30	-20,-20	APPROVED	DC/894/20(DC/338/20)
2	296	MAHE	ANCHOR CAFE	GBT	GOS	C10339	-4.74708	55.49331			icon/green_tower.png	30,30	-20,-20	APPROVED	DC/342/20
3	231	MAHE	PROVIDENCE	PALM	GOS	V21016	-4.649573	55.479334			icon/palm-tree.png	30,30	-20,-20	ERECTED	PALM TREE HAS BEEN ERECTED. EQUIPMENT TO BE INSTALLED
4	183	MAHE	AV BUILDING	RTP	PRIVATE (AV GROUP)	V5513	-4.62262	55.45013			icon/building1.png	30,30	-20,-20	APPROVED	WAITING FOR WMC REPORT ON WHERE TO INSTALL
5	161	MAHE	INDEPENDENCE	RTP	PRIVATE		-4.623599	55.454766			icon/building1.png	30,30	-20,-20	PENDING	WAITING
6	122	MAHE	LA BATIE	GBP	GOS		-4.605612	55.436075			icon/pole1.png	30,30	-20,-20	PENDING	PENDING
7	171	MAHE	PERSEVERANCE	GBT	AIRTEL		-4.60471	55.46204			icon/red_tower.png	30,30	-20,-20	PENDING	TEST
8	242	MAHE	ANSE FAURE	GBT	SBC		-4.683761111	55.52859444			icon/yellow_tower.png	30,30	-20,-20	PENDING	NEED TO GET PERMISSION
9	311	MAHE	BARBARONS	GBT	BBC		-4.68033	55.454			icon/black_tower.png	30,30	-20,-20	PENDING	PENDING
11	202	MAHE	STADIUM	GBT	OTHER		-4.63617	55.47109			icon/tower1.png	30,30	-20,-20	PENDING	PENDING
12	151	MAHE	MONT BUXTON	GBT	GOS	V21114	-4.612716	55.447746			icon/green_tower.png	30,30	-20,-20	APPROVED	DC/372/20
																														

*/